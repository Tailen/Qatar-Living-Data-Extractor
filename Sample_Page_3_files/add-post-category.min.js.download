var getQueryString = function ( field, url ) {
    var href = url ? url : window.location.href;
    var reg = new RegExp( '[?&]' + field + '=([^&#]*)', 'i' );
    var string = reg.exec(href);
    return string ? string[1] : null;
};

var AddPostCategory = Backbone.View.extend({
    el: $('.add-post-category'),

    initialize: function() {
         this.render();
         var type = getQueryString('type');
         if(type == null && $(window).width() > 767){
            type = 'property';
         } 
         $('.b-add-post--el-tabs').addClass("b-add-post--el-tabs--mix-" + type);

         if($(window).width() > 767){
            $('.b-add-post--el-tab--mix-' + type).addClass('b-add-post--el-tab--mix-active');
            $('.b-post-tab--mix-' + type).addClass('b-post-tab--mix-active');   
         }
    },

    render: function() {
           
    },

    events: {
        'click .b-add-post--el-tab': 'showTab'
    },

    showTab: function(ev) {
        ev.preventDefault();

        var $element = ev.currentTarget;
        var $parent = $($element).parent();
        var type =  $($element).attr('data-type');

        $($parent).attr("class", "b-add-post--el-tabs b-add-post--el-tabs--mix-" + type );


        $('.b-add-post--el-tab').each(function($indx, $elem){

            if($($element).attr('data-type') != $($elem).attr('data-type')){

                $($elem).removeClass('b-add-post--el-tab--mix-active');

            }

        });

        $($element).toggleClass('b-add-post--el-tab--mix-active');

        $('.b-post-tab').each(function($indx, $elem){

            if($('.b-post-tab--mix-' + type).attr('data-type') != $($elem).attr('data-type')){

                $($elem).removeClass('b-post-tab--mix-active');

            }

        });

        $('.b-post-tab--mix-' + type).toggleClass('b-post-tab--mix-active');


    }
});

new AddPostCategory();